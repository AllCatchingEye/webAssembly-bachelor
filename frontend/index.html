<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <base href="." target="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <script src="https://cdn.plot.ly/plotly-2.30.0.min.js" charset="utf-8"></script> -->
    <title>Simple HTML Index</title>
</head>
<body>
    <h1>Hello, World!</h1>
    <p>This is a simple HTML index file.</p>

    <div>
      <h3>Temperature: </h3>
      <div id="temperaturePlot" style="width:600px;height:250px;"></div>
    </div>

    <div>
      <h3>Humidity: </h3>
      <div id="humidityPlot" style="width:600px;height:250px;"></div>
    </div>

    <script type="importmap">
    {
      "imports": {
        "@bytecodealliance/preview2-shim/cli": "./node_modules/@bytecodealliance/preview2-shim/lib/browser/cli.js",
        "@bytecodealliance/preview2-shim/clocks": "./node_modules/@bytecodealliance/preview2-shim/lib/browser/clocks.js",
        "@bytecodealliance/preview2-shim/filesystem": "./node_modules/@bytecodealliance/preview2-shim/lib/browser/filesystem.js",
        "@bytecodealliance/preview2-shim/http": "./node_modules/@bytecodealliance/preview2-shim/lib/browser/http.js",
        "@bytecodealliance/preview2-shim/io": "./node_modules/@bytecodealliance/preview2-shim/lib/browser/io.js",
        "@bytecodealliance/preview2-shim/random": "./node_modules/@bytecodealliance/preview2-shim/lib/browser/random.js",
        "@bytecodealliance/preview2-shim/sockets": "./node_modules/@bytecodealliance/preview2-shim/lib/browser/sockets.js"
      }
    }

    </script>
    <script type="module">
    // import { cow } from './src/cowsay/out/cowsay.js';
    // import { plotFunctions } from "./dist/plot.js"

    const { hello } = await import('./dist/plot.js');
    hello("World");
    // import { plotFunctions } from './src/plot/out/plot.js';

  // function fetchDht11() {
  //   return fetch("http://192.168.0.217:8000/get_dht11_values")
  //     .then(response => {
  //       if (!response.ok) {
  //         throw new Error("Network response was not ok");
  //       }
  //       console.log("Response: ", response);
  //       return response.json();
  //     })
  //     .catch(error => {
  //       console.error('Error fetching data:', error);
  //       return null;
  //     });
  // }
  //
  // function plotLineChart(x, y, elementID) {
  //   const TESTER = document.getElementById(elementID);
  //
  //   Plotly.newPlot(TESTER, [{
  //     x: x,
  //     y: y,
  //   }], {
  //     margin: { t: 0 },
  //   });
  // }
  //
  // fetchDht11()
  //   .then(response => {
  //     if (response) {
  //       const ids = response.map(obj => obj.id);
  //       const temperatures = response.map(obj => obj.temperature);
  //       const humidities = response.map(obj => obj.humidity);
  //       console.log(ids);
  //       console.log(temperatures);
  //       console.log(humidities);
  //
  //       const dht11Data = plotFunctions.buildDht11Data(ids, temperatures, humidities);
  //       console.log(dht11Data);
  //       plotLineChart(dht11Data.ids, dht11Data.temperatures, 'temperaturePlot');
  //       plotLineChart(dht11Data.ids, dht11Data.humidities, 'humidityPlot');
  //     }
  //   })
  //   .catch(error => {
  //     console.error('Error processing data and plotting:', error);
  //   });
  //   console.log(cow.say('Hello Wasm Components!'));
    </script>
</body>
</html>
